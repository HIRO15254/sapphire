# クイックスタートガイド: ポーカーセッション記録機能の改善

**Feature Branch**: `003-session-enhancements`
**Date**: 2025-10-26
**対象ユーザー**: ポーカープレイヤー（エンドユーザー）

## 概要

本ガイドは、改善されたポーカーセッション記録機能の使い方を説明します。新機能により、セッション記録がより効率的で、データ管理がより柔軟になりました。

## 新機能の概要

### 1. モーダルでのセッション追加・編集

セッション一覧画面から離れることなく、モーダルウィンドウでセッションを素早く記録できます。

### 2. 場所の管理

過去に使用した場所を簡単に再選択でき、入力ミスがなくなります。

### 3. リッチテキストメモ

太字、リスト、見出しなどの書式を使って、セッション中の出来事を詳しく記録できます。

### 4. タグによる分類

セッションに複数のタグを設定し、後で簡単にフィルタリングできます。

---

## 基本的な使い方

### セッションを記録する

#### ステップ 1: モーダルを開く

1. セッション一覧画面の右上にある「**新規セッション追加**」ボタンをクリックします
2. モーダルウィンドウが開き、セッション入力フォームが表示されます

#### ステップ 2: 基本情報を入力する

以下の項目を入力します:

- **日時**: セッション開始日時（カレンダーから選択）
- **場所**: ドロップダウンから選択、または新しい場所を入力
- **バイイン**: 最初に用意した金額（円）
- **キャッシュアウト**: 最終的に手元に残った金額（円）
- **プレイ時間**: プレイした時間（分）

**ヒント**: 利益は自動的に計算されます（キャッシュアウト - バイイン）。

#### ステップ 3: 場所を選択する

**既存の場所を選択する場合**:
1. 場所入力欄をクリックします
2. 過去に使用した場所のリストが表示されます
3. 場所名の一部を入力すると、リストが絞り込まれます
4. 目的の場所をクリックして選択します

**新しい場所を追加する場合**:
1. 場所入力欄に新しい場所名を入力します
2. 「**新規追加: [場所名]**」オプションが表示されます
3. それをクリックして選択します
4. セッション保存時に、新しい場所が自動的に登録されます

#### ステップ 4: メモを記録する（オプション）

メモ入力欄をクリックすると、リッチテキストエディタのツールバーが表示されます。

**利用可能な書式設定**:
- **太字**: 重要なポイントを強調
- *イタリック*: 補足情報を目立たせる
- **見出し**: セクションを整理
- **箇条書きリスト**: 複数のポイントを列挙
- **番号付きリスト**: 手順や順序を記録
- **リンク**: 関連する情報へのリンクを追加

**メモの記入例**:

```
## ハイライト
- AA vs KK でオールイン、勝利
- ブラフが3回成功

## 反省点
1. ポジションが悪い時に無理にプレイした
2. 疲労でミスが増えた

## 次回の改善点
早めに休憩を取る
```

#### ステップ 5: タグを追加する（オプション）

タグを使うと、後でセッションを分類・検索しやすくなります。

**タグの追加方法**:
1. タグ入力欄をクリックします
2. タグ名を入力します（例: "トーナメント"、"好調"、"深夜"）
3. **Enter**キーを押します
4. タグが追加され、入力欄がクリアされます
5. 複数のタグを追加できます（最大20個）

**既存のタグを再利用する**:
1. タグ入力欄に文字を入力すると、既存のタグがオートコンプリート候補として表示されます
2. 候補をクリックして選択します

**タグを削除する**:
- 追加したタグの右側にある「×」アイコンをクリックします

**タグの例**:
- ゲーム形式: "トーナメント"、"キャッシュゲーム"
- 調子: "好調"、"不調"、"普通"
- 時間帯: "深夜"、"昼間"、"夕方"
- 特別なイベント: "大勝"、"大負け"、"初参加"

#### ステップ 6: セッションを保存する

1. すべての必須項目を入力したら、「**保存**」ボタンをクリックします
2. モーダルが閉じ、一覧画面に新しいセッションが表示されます
3. 統計情報も自動的に更新されます

**キャンセルする場合**:
- 「**キャンセル**」ボタンをクリックするか、モーダルの背景をクリックします
- 入力内容は破棄されます

---

### セッションを編集する

1. セッション一覧から編集したいセッションを見つけます
2. セッションカードの右上にある「**編集**」ボタン（鉛筆アイコン）をクリックします
3. モーダルウィンドウが開き、既存の情報が表示されます
4. 変更したい項目を編集します
5. 「**保存**」ボタンをクリックして変更を保存します

---

### セッションをフィルタリングする

#### タグでフィルタリング

複数のタグを選択して、条件に合うセッションのみを表示できます。

1. セッション一覧画面の上部にある「**タグでフィルター**」セクションを開きます
2. フィルタリングしたいタグを選択します（複数選択可能）
3. 選択したすべてのタグを持つセッションのみが表示されます（AND条件）
4. フィルターを解除するには、選択したタグを再度クリックします

**例**:
- "トーナメント"と"好調"を選択 → トーナメントで好調だったセッションのみ表示
- "深夜"を選択 → 深夜にプレイしたセッションのみ表示

#### 日付範囲でフィルタリング

1. 「**日付範囲**」セクションで開始日と終了日を選択します
2. その期間内のセッションのみが表示されます

#### 場所でフィルタリング

1. 「**場所**」ドロップダウンから場所を選択します
2. その場所でのセッションのみが表示されます

---

### セッションを削除する

1. セッション一覧から削除したいセッションを見つけます
2. セッションカードの右上にある「**削除**」ボタン（ゴミ箱アイコン）をクリックします
3. 確認ダイアログが表示されます
4. 「**削除する**」をクリックして確定します

**注意**: 削除したセッションは復元できません。

---

## よくある質問（FAQ）

### Q1: モーダルが開いている状態でページを離れるとどうなりますか?

**A**: 未保存の変更は失われます。保存せずにモーダルを閉じようとすると、ブラウザによっては警告が表示される場合があります。

---

### Q2: 同じ場所名を大文字小文字だけ変えて追加できますか?

**A**: いいえ、できません。場所名は大文字小文字を区別しないため、"Casino A"と"casino a"は同じ場所として扱われます。

---

### Q3: タグは何個まで追加できますか?

**A**: 1つのセッションに最大20個のタグを追加できます。実用上は10個以内に抑えることをお勧めします。

---

### Q4: メモにはどんな内容を書くべきですか?

**A**: 以下のような内容が役立ちます:
- 印象的なハンド（AA vs KKなど）
- 戦略の変更や実験
- 対戦相手の特徴
- 自分のプレイの反省点
- 次回への改善点
- 体調や精神状態

---

### Q5: メモにリンクを追加できますか?

**A**: はい、リッチテキストエディタのリンクボタンを使って、外部サイトへのリンクを追加できます。

---

### Q6: 過去のセッションのメモを一括で編集できますか?

**A**: いいえ、各セッションを個別に編集する必要があります。

---

### Q7: タグフィルターは「OR条件」（いずれかのタグ）ですか、「AND条件」（すべてのタグ）ですか?

**A**: AND条件です。選択したすべてのタグを持つセッションのみが表示されます。例えば、"トーナメント"と"好調"を選択すると、両方のタグを持つセッションのみが表示されます。

---

### Q8: モーダルでエラーが表示されました。どうすればいいですか?

**A**: エラーメッセージを確認して、以下を試してください:
- 必須項目（日時、場所、バイイン、キャッシュアウト、プレイ時間）がすべて入力されているか確認
- 入力値が正しい形式か確認（金額は正の数、プレイ時間は正の整数）
- メモが50,000文字を超えていないか確認
- タグが20個を超えていないか確認

それでも解決しない場合は、ページを再読み込みして再度試してください。

---

### Q9: リッチテキストメモが正しく表示されません。

**A**: 以下を確認してください:
- セッションを保存した後、ページを再読み込みしてみる
- メモに危険なHTML（スクリプトタグなど）が含まれている場合、セキュリティのため削除されます
- ブラウザのキャッシュをクリアしてみる

---

### Q10: 統計情報はいつ更新されますか?

**A**: セッションを作成、編集、または削除すると、統計情報が自動的に更新されます。

---

## トラブルシューティング

### 問題: モーダルが表示されない

**解決策**:
1. ページを再読み込みする
2. ブラウザのキャッシュをクリアする
3. 別のブラウザで試す

---

### 問題: 場所やタグのオートコンプリートが遅い

**解決策**:
1. 入力を続けて候補を絞り込む（300ms以内に表示されるはず）
2. 候補が表示されない場合、ページを再読み込みする

---

### 問題: セッション保存時にエラーが発生する

**解決策**:
1. インターネット接続を確認する
2. すべての必須項目が正しく入力されているか確認する
3. ページを再読み込みして再度試す
4. それでも解決しない場合は、開発者に連絡する

---

### 問題: リッチテキストエディタのツールバーが表示されない

**解決策**:
1. メモ入力欄を一度クリックしてフォーカスする
2. ブラウザのズームレベルを100%にする
3. ページを再読み込みする

---

## ヒントとベストプラクティス

### 1. 一貫したタグ付け

同じ種類の情報には一貫したタグを使用することをお勧めします:
- ゲーム形式: "トーナメント"、"キャッシュゲーム"
- 調子: "好調"、"不調"、"普通"
- 結果: "大勝"、"小勝"、"引き分け"、"小負け"、"大負け"

### 2. メモの構造化

メモを構造化すると、後で振り返りやすくなります:
```
## ハイライト
[印象的なハンド]

## 反省点
[改善すべき点]

## 次回への改善点
[具体的なアクションプラン]
```

### 3. セッション直後に記録

セッション終了直後に記録すると、詳細を忘れずに記録できます。

### 4. フィルターを活用した分析

定期的にフィルターを使ってパターンを分析しましょう:
- "好調"タグのセッションの共通点は?
- "深夜"のセッションの成績は?
- 特定の場所でのパフォーマンスは?

### 5. 場所の命名規則

場所名は分かりやすく、一貫した形式にすることをお勧めします:
- "カジノ東京 本店"
- "オンライン - PokerStars"
- "友人宅 - 田中さん"

---

## サポート

問題が解決しない場合や、質問がある場合は、以下の方法でサポートを受けてください:

- **GitHub Issues**: [プロジェクトのIssuesページ](https://github.com/your-username/sapphire/issues)
- **メール**: support@example.com

---

**バージョン**: 1.0
**最終更新**: 2025-10-26
